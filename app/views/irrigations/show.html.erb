<div class="container mt-4">
  <div class="card">
    <div class="card-header">
      <div class="d-flex justify-content-between align-items-center">
        <h1>Detalle de Riego</h1>
        <%= link_to irrigations_path, class: 'btn btn-secondary' do %>
          <i class="bi bi-arrow-left"></i> Volver
        <% end %>
      </div>
    </div>

    <div class="card-body">
      <div class="row">
        <!-- Información básica -->
        <div class="col-12 mb-4">
          <h4 class="border-bottom pb-2">Información General</h4>
          <div class="row">
            <div class="col-md-3">
              <p><strong>Fecha:</strong> <%= @irrigation.fecha.strftime("%d/%m/%Y") %></p>
            </div>
            <div class="col-md-3">
              <p><strong>Hora:</strong> <%= @irrigation.hora.strftime("%H:%M") %></p>
            </div>
            <div class="col-md-3">
              <p><strong>Sector:</strong> <%= @irrigation.sector.nombre %></p>
            </div>
            <div class="col-md-3">
              <p><strong>Encargado:</strong> <%= "#{@irrigation.user.nombre} #{@irrigation.user.apellido}" %></p>
            </div>
          </div>
        </div>

        <!-- Información de pulsos -->
        <div class="col-12 mb-4">
          <h4 class="border-bottom pb-2">Información de Pulsos</h4>
          <div class="row">
            <div class="col-md-4">
              <p><strong>Número de Pulsos:</strong> <%= @irrigation.nro_pulsos %></p>
            </div>
            <div class="col-md-4">
              <p><strong>Tiempo por Pulso:</strong> <%= number_with_precision(@irrigation.tiempo_pulso, precision: 2) %> min</p>
            </div>
            <div class="col-md-4">
              <p><strong>Porcentaje Drenaje:</strong> <%= number_with_precision(@irrigation.porcentaje_drenaje, precision: 2) %>%</p>
            </div>
          </div>
        </div>

        <!-- Riego de entrada -->
        <div class="col-md-6 mb-4">
          <h4 class="border-bottom pb-2">Riego de Entrada</h4>
          <div class="table-responsive">
            <table class="table table-sm">
              <tbody>
                <tr>
                  <th>MM:</th>
                  <td><%= number_with_precision(@irrigation.riego_entrada_mm, precision: 2) %></td>
                </tr>
                <tr>
                  <th>PH:</th>
                  <td><%= number_with_precision(@irrigation.riego_entrada_ph, precision: 2) %></td>
                </tr>
                <tr>
                  <th>CE:</th>
                  <td><%= number_with_precision(@irrigation.riego_entrada_ce, precision: 2) %></td>
                </tr>
                <tr>
                  <th>Nitratos:</th>
                  <td><%= number_with_precision(@irrigation.riego_entrada_nitratos, precision: 2) %></td>
                </tr>
                <tr>
                  <th>Potasio:</th>
                  <td><%= number_with_precision(@irrigation.riego_entrada_potasio, precision: 2) %></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Drenaje de riego -->
        <div class="col-md-6 mb-4">
          <h4 class="border-bottom pb-2">Drenaje de Riego</h4>
          <div class="table-responsive">
            <table class="table table-sm">
              <tbody>
                <tr>
                  <th>MM:</th>
                  <td><%= number_with_precision(@irrigation.drenaje_riego_mm, precision: 2) %></td>
                </tr>
                <tr>
                  <th>PH:</th>
                  <td><%= number_with_precision(@irrigation.drenaje_riego_ph, precision: 2) %></td>
                </tr>
                <tr>
                  <th>CE:</th>
                  <td><%= number_with_precision(@irrigation.drenaje_riego_ce, precision: 2) %></td>
                </tr>
                <tr>
                  <th>Nitratos:</th>
                  <td><%= number_with_precision(@irrigation.drenaje_riego_nitratos, precision: 2) %></td>
                </tr>
                <tr>
                  <th>Potasio:</th>
                  <td><%= number_with_precision(@irrigation.drenaje_riego_potasio, precision: 2) %></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Mediciones -->
        <div class="col-12 mb-4">
          <h4 class="border-bottom pb-2">Mediciones</h4>
          <div class="row">
            <div class="col-md-6">
              <h5 class="h6">Inicial</h5>
              <p><strong>Humedad:</strong> <%= number_with_precision(@irrigation.humedad_inicial, precision: 2) %>%</p>
              <p><strong>CE:</strong> <%= number_with_precision(@irrigation.ce_inicial, precision: 2) %></p>
            </div>
            <div class="col-md-6">
              <h5 class="h6">Final</h5>
              <p><strong>Humedad:</strong> <%= number_with_precision(@irrigation.humedad_final, precision: 2) %>%</p>
              <p><strong>CE:</strong> <%= number_with_precision(@irrigation.ce_final, precision: 2) %></p>
            </div>
          </div>
        </div>

        <!-- Pulsos con agua -->
        <div class="col-12 mb-4">
          <h4 class="border-bottom pb-2">Pulsos con Agua</h4>
          <div class="row">
            <div class="col-md-6">
              <p><strong>Número de Pulsos:</strong> <%= @irrigation.pulsos_agua %></p>
            </div>
            <div class="col-md-6">
              <p><strong>Tiempo:</strong> <%= number_with_precision(@irrigation.tiempo_pulsos_agua, precision: 2) %> min</p>
            </div>
          </div>
        </div>

        <!-- Mediciones hoja -->
        <div class="col-12 mb-4">
          <h4 class="border-bottom pb-2">Mediciones Hoja</h4>
          <div class="row">
            <div class="col-md-6">
              <p><strong>Potasio:</strong> <%= number_with_precision(@irrigation.potasio_hoja, precision: 2) %></p>
            </div>
            <div class="col-md-6">
              <p><strong>Nitratos:</strong> <%= number_with_precision(@irrigation.nitratos_hoja, precision: 2) %></p>
            </div>
          </div>
        </div>

        <!-- Otros datos -->
        <div class="col-12">
          <h4 class="border-bottom pb-2">Otros Datos</h4>
          <div class="row">
            <div class="col-md-6">
              <p><strong>Número de Muestras:</strong> <%= @irrigation.muestras %></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 